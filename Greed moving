---====== Load spawner ======---

local spawner = loadstring(game:HttpGet("https://raw.githubusercontent.com/RegularVynixu/Utilities/main/Doors/Entity%20Spawner/V2/Source.lua"))()

---====== Create entity ======---

local entity = spawner.Create({
	Entity = {
		Name = "Greed",
		Asset = "rbxassetid://74778789796562",
		HeightOffset = 0
	},
	Lights = {
		Flicker = {
			Enabled = true,
			Duration = 1
		},
		Shatter = true,
		Repair = false
	},
	Earthquake = {
		Enabled = true
	},
	CameraShake = {
		Enabled = true,
		Range = 100,
		Values = {1.5, 20, 0.1, 1} -- Magnitude, Roughness, FadeIn, FadeOut
	},
	Movement = {
		Speed = 100,
		Delay = 2,
		Reversed = true
	},
	Rebounding = {
		Enabled = false,
		Type = "Ambush", -- "Blitz"
		Min = 1,
		Max = 1,
		Delay = 2
	},
	Damage = {
		Enabled = true,
		Range = 40,
		Amount = 125
	},
	Crucifixion = {
		Enabled = true,
		Range = 40,
		Resist = false,
		Break = true
	},
	Death = {
		Type = "Guiding", -- "Curious"
		Hints = {"Death", "Hints", "Go", "Here"},
		Cause = ""
	}
})

---====== Debug entity ======---

entity:SetCallback("OnSpawned", function()
    print("Entity has spawned")
end)

entity:SetCallback("OnStartMoving", function()
    print("Entity has started moving")
end)

entity:SetCallback("OnEnterRoom", function(room, firstTime)
    if firstTime == true then
        print("Entity has entered room: ".. room.Name.. " for the first time")
    else
        print("Entity has entered room: ".. room.Name.. " again")
    end
end)

entity:SetCallback("OnLookAt", function(lineOfSight)
	if lineOfSight == true then
		print("Player is looking at entity")
	else
		print("Player view is obstructed by something")
	end
end)

entity:SetCallback("OnRebounding", function(startOfRebound)
    if startOfRebound == true then
        print("Entity has started rebounding")
	else
        print("Entity has finished rebounding")
	end
end)

entity:SetCallback("OnDespawning", function()
    print("Entity is despawning")
end)

entity:SetCallback("OnDespawned", function()
    print("Entity has despawned")
end)

entity:SetCallback("OnDamagePlayer", function(newHealth)
	if newHealth == 0 then
		print("Entity has killed the player")

  local TweenService = game:GetService("TweenService")

                    local JumpscareGui = Instance.new("ScreenGui")
                    JumpscareGui.Name = "JumpscareGui"
                    JumpscareGui.IgnoreGuiInset = true
                    JumpscareGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
                    JumpscareGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")

                    local Background = Instance.new("Frame")
                    Background.BackgroundColor3 = Color3.fromRGB(3, 25, 99)
                    Background.Size = UDim2.new(1, 0, 1, 0)
                    Background.ZIndex = 999
                    Background.Parent = JumpscareGui

                    local Overlay = Instance.new("ImageLabel")
                    Overlay.BackgroundTransparency = 1
                    Overlay.Size = UDim2.new(1, 0, 1, 0)
                    Overlay.Image = "rbxassetid://93477339710496"
                    Overlay.ZIndex = 998
                    Overlay.Parent = Background

                    local Face = Instance.new("ImageLabel")
                    Face.AnchorPoint = Vector2.new(0.5, 0.5)
                    Face.BackgroundTransparency = 1
                    Face.Position = UDim2.new(0.5, 0, 0.5, 0)
                    Face.Size = UDim2.new(0, 300, 0, 150)
                    Face.Image = "rbxassetid://16151234557"
                    Face.ZIndex = 1000
                    Face.Parent = Background

                    local scare = Instance.new("Sound")
                    scare.SoundId = "rbxassetid://6754147732"
                    scare.Volume = 10
                    scare.Parent = JumpscareGui
                    scare:Play()

                    task.spawn(function()
                        while JumpscareGui.Parent do
                            Background.BackgroundColor3 = Color3.fromRGB(3, 25, 99)
                            task.wait(math.random(25, 100) / 1000)
                            Background.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
                            task.wait(math.random(25, 100) / 1000)
                        end
                    end)

                    local overlayImages = {
                        "rbxassetid://93477339710496",
                        "rbxassetid://82216621528642"
                    }
                    task.spawn(function()
                        local i = 1
                        while JumpscareGui.Parent do
                            Overlay.Image = overlayImages[i]
                            i = i % #overlayImages + 1
                            task.wait(0.07)
                        end
                    end)

                    local function tweenTo(object, props, time)
                        local tween = TweenService:Create(object, TweenInfo.new(time, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut), props)
                        tween:Play()
                        return tween
                    end

                    local function getRandomNearCenterPosition()
                        local offsetX = (math.random(-6, 6) / 100)
                        local offsetY = (math.random(-6, 6) / 100)
                        if math.abs(offsetX) < 0.01 then
                            offsetX = 0.015 * (math.random(0, 1) == 0 and -1 or 1)
                        end
                        if math.abs(offsetY) < 0.01 then
                            offsetY = 0.015 * (math.random(0, 1) == 0 and -1 or 1)
                        end
                        return UDim2.new(0.5 + offsetX, 0, 0.5 + offsetY, 0)
                    end

                    local duration = 1
                    local enlargeTween = tweenTo(Face, {
                        Size = UDim2.new(3, 0, 2.5, 0),
                        ImageTransparency = 0,
                    }, duration)

                    local startTime = tick()
                    while tick() - startTime < duration do
                        Face.Position = getRandomNearCenterPosition()
                        task.wait(0.05)
                    end
                    enlargeTween.Completed:Wait()

                    tweenTo(Face, {
                        Size = UDim2.new(0.1, 0, 0.1, 0),
                        Position = UDim2.new(0.5, 0, 0.5, 0)
                    }, 0.1)

                    task.delay(1.5, function()
                        JumpscareGui:Destroy()
                    end)
	else
		print("Entity has damaged the player")
	end
end)

--[[

DEVELOPER NOTE:
By overwriting 'CrucifixionOverwrite' the default crucifixion callback will be replaced with your custom callback.

entity:SetCallback("CrucifixionOverwrite", function()
    print("Custom crucifixion callback")
end)

]]--

---====== Run entity ======---

entity:Run()
