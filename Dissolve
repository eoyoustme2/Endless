---====== Load spawner ======---

local spawner = loadstring(game:HttpGet("https://raw.githubusercontent.com/RegularVynixu/Utilities/main/Doors/Entity%20Spawner/V2/Source.lua"))()

---====== Create entity ======---

local entity = spawner.Create({
	Entity = {
		Name = "Dissolve",
		Asset = "rbxassetid://122517320020372",
		HeightOffset = 1
	},
	Lights = {
		Flicker = {
			Enabled = false,
			Duration = 1
		},
		Shatter = false,
		Repair = false
	},
	Earthquake = {
		Enabled = true
	},
	CameraShake = {
		Enabled = true,
		Range = 50,
		Values = {15, 20, 0.1, 1} -- Magnitude, Roughness, FadeIn, FadeOut
	},
	Movement = {
		Speed = 500,
		Delay = 4,
		Reversed = false
	},
	Rebounding = {
		Enabled = true,
		Type = "Ambush", -- "Blitz"
		Min = 3,
		Max = 5,
		Delay = 0.0000001
	},
	Damage = {
		Enabled = true,
		Range = 40,
		Amount = 125
	},
	Crucifixion = {
		Enabled = true,
		Range = 40,
		Resist = false,
		Break = true
	},
	Death = {
		Type = "Guiding", -- "Curious"
		Hints = {"Death", "Hints", "Go", "Here"},
		Cause = ""
	}
})

---====== Debug entity ======---

entity:SetCallback("OnSpawned", function()
    print("Entity has spawned")
end)

entity:SetCallback("OnStartMoving", function()
    print("Entity has started moving")
end)

entity:SetCallback("OnEnterRoom", function(room, firstTime)
    if firstTime == true then
        print("Entity has entered room: ".. room.Name.. " for the first time")
    else
        print("Entity has entered room: ".. room.Name.. " again")
    end
end)

entity:SetCallback("OnLookAt", function(lineOfSight)
	if lineOfSight == true then
		print("Player is looking at entity")
	else
		print("Player view is obstructed by something")
	end
end)

entity:SetCallback("OnRebounding", function(startOfRebound)
    if startOfRebound == true then
        print("Entity has started rebounding")
	else
        print("Entity has finished rebounding")
	end
end)

entity:SetCallback("OnDespawning", function()
    print("Entity is despawning")
end)

entity:SetCallback("OnDespawned", function()
    print("Entity has despawned")
end)

entity:SetCallback("OnDamagePlayer", function(newHealth)
	if newHealth == 0 then
		print("Entity has killed the player")
	else
		print("Entity has damaged the player")
	end
end)

--[[

DEVELOPER NOTE:
By overwriting 'CrucifixionOverwrite' the default crucifixion callback will be replaced with your custom callback.

entity:SetCallback("CrucifixionOverwrite", function()
    print("Custom crucifixion callback")
end)

]]--

---====== Run entity ======---

entity:Run()

-- Delay một chút để entity được thêm vào workspace
task.delay(1, function()
    -- Tìm model tên "Dissolve" trong workspace
    local entityModel = workspace:FindFirstChild("Dissolve")
    
    if entityModel and entityModel:IsA("Model") then
        -- Tìm Part tên "DissolveNew" trong model
        local dissolvePart = entityModel:FindFirstChild("DissolveNew")
        if dissolvePart and dissolvePart:IsA("BasePart") then
            -- Tìm Attachment tên "Attachment" trong Part
            local attachment = dissolvePart:FindFirstChild("Attachment")
            if attachment and attachment:IsA("Attachment") then
                -- Tìm ParticleEmitter trong Attachment
                local particle = attachment:FindFirstChildOfClass("ParticleEmitter")
                if particle then
                    -- Đổi size của ParticleEmitter thành 6
                    particle.Size = NumberSequence.new(6)
                    print("ParticleEmitter size set to 6")
                else
                    warn("Không tìm thấy ParticleEmitter trong Attachment")
                end
            else
                warn("Không tìm thấy Attachment trong DissolveNew")
            end
        else
            warn("Không tìm thấy Part 'DissolveNew' trong model Dissolve")
        end
    else
        warn("Không tìm thấy model 'Dissolve' trong workspace")
    end
end)

